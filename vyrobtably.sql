--------------------------------------------------------
--  File created - Štvrtok-júna-23-2016   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table PREDMET
--------------------------------------------------------

  CREATE TABLE "DALIK"."PREDMET" 
   (	"ID_PREDMET" NUMBER(*,0), 
	"NAZOV" VARCHAR2(20 BYTE), 
	"KREDITY" NUMBER(*,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table STUDENT
--------------------------------------------------------

  CREATE TABLE "DALIK"."STUDENT" 
   (	"ID_STUDENT" NUMBER, 
	"MENO" VARCHAR2(20 BYTE), 
	"PRIEZVISKO" VARCHAR2(20 BYTE), 
	"ROCNIK" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ZAPIS
--------------------------------------------------------

  CREATE TABLE "DALIK"."ZAPIS" 
   (	"ID_STUDENT" NUMBER, 
	"ID_PREDMET" NUMBER, 
	"ROK" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into DALIK.PREDMET
SET DEFINE OFF;
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('1','informatika','5');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('2','matematika','3');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('3','strojníctvo','2');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('4','chémia','3');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('5','biológia','4');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('6','telocvik','2');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('7','java basic','6');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('8','filozofia','1');
Insert into DALIK.PREDMET (ID_PREDMET,NAZOV,KREDITY) values ('9','Jakel','3');
REM INSERTING into DALIK.STUDENT
SET DEFINE OFF;
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('1','Peter','Pan','1');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('2','Janko','Hrasko','2');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('3','Jozef','Rozpravka','3');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('4','Anna','GreenHouse','4');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('5','Julia','Antony','5');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('6','Peter','Random','3');
Insert into DALIK.STUDENT (ID_STUDENT,MENO,PRIEZVISKO,ROCNIK) values ('7','Juraj','Švárny','3');
REM INSERTING into DALIK.ZAPIS
SET DEFINE OFF;
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('1','2','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('2','3','2014');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('2','1','2016');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('4','4','2013');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('6','6','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('1','7','2013');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('7','8','2016');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('3','1','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('4','2','2012');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('6','3','2013');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('1','4','2014');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('2','6','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('3','7','2013');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('4','8','2014');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('6','1','2013');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('1','2','2014');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('2','3','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('3','4','2015');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('4','6','2016');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('6','7','2014');
Insert into DALIK.ZAPIS (ID_STUDENT,ID_PREDMET,ROK) values ('1','1','2016');
--------------------------------------------------------
--  DDL for Index PREDMET_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "DALIK"."PREDMET_PK" ON "DALIK"."PREDMET" ("ID_PREDMET") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index STUDENT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "DALIK"."STUDENT_PK" ON "DALIK"."STUDENT" ("ID_STUDENT") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  Constraints for Table PREDMET
--------------------------------------------------------

  ALTER TABLE "DALIK"."PREDMET" ADD CONSTRAINT "PREDMET_CHK1" CHECK (kredity >=0 and kredity<7) ENABLE;
  ALTER TABLE "DALIK"."PREDMET" MODIFY ("KREDITY" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."PREDMET" MODIFY ("NAZOV" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."PREDMET" ADD CONSTRAINT "PREDMET_PK" PRIMARY KEY ("ID_PREDMET")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "DALIK"."PREDMET" MODIFY ("ID_PREDMET" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table STUDENT
--------------------------------------------------------

  ALTER TABLE "DALIK"."STUDENT" MODIFY ("PRIEZVISKO" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."STUDENT" MODIFY ("MENO" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."STUDENT" ADD CONSTRAINT "STUDENT_PK" PRIMARY KEY ("ID_STUDENT")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "DALIK"."STUDENT" ADD CHECK (ROCNIK>0 AND ROCNIK<6) ENABLE;
  ALTER TABLE "DALIK"."STUDENT" MODIFY ("ID_STUDENT" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ZAPIS
--------------------------------------------------------

  ALTER TABLE "DALIK"."ZAPIS" MODIFY ("ID_STUDENT" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."ZAPIS" MODIFY ("ID_PREDMET" NOT NULL ENABLE);
  ALTER TABLE "DALIK"."ZAPIS" MODIFY ("ROK" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table ZAPIS
--------------------------------------------------------

  ALTER TABLE "DALIK"."ZAPIS" ADD FOREIGN KEY ("ID_STUDENT")
	  REFERENCES "DALIK"."STUDENT" ("ID_STUDENT") ENABLE;
  ALTER TABLE "DALIK"."ZAPIS" ADD FOREIGN KEY ("ID_PREDMET")
	  REFERENCES "DALIK"."PREDMET" ("ID_PREDMET") ENABLE;
--------------------------------------------------------
--  DDL for Trigger PREDMET_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "DALIK"."PREDMET_TRG" 
BEFORE INSERT ON PREDMET 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID_PREDMET IS NULL THEN
      SELECT PREDMET_SEQ.NEXTVAL INTO :NEW.ID_PREDMET FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "DALIK"."PREDMET_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger STUDENT_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "DALIK"."STUDENT_TRG" 
BEFORE INSERT ON STUDENT 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID_STUDENT IS NULL THEN
      SELECT STUDENT_SEQ1.NEXTVAL INTO :NEW.ID_STUDENT FROM SYS.DUAL;
    END IF;
    IF INSERTING AND :NEW.ROCNIK IS NULL THEN
      SELECT STUDENT_SEQ.NEXTVAL INTO :NEW.ROCNIK FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "DALIK"."STUDENT_TRG" ENABLE;
